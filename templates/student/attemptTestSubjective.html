{% extends "shared/BaseLoggedIn.html" %}
{% block title %}Objective Test{% endblock %}
{% block linkcss %}
{% endblock %}
{% block content %}
<style>
    .objectivebutton {
        border: none;
        outline: none;
        height: 50px;
        width: 30%;
        background-color: rgb(120, 120, 133);
        color: white;
        border-radius: 4px;
        font-weight: bold;
    }

    .objectivebutton:hover {
        background: white;
        border: 2px solid;
        color: black;
    }
</style>


<div class="container">
    <h2>Subjective test</h2>
    <div class="row">
        <div class="mb-5">
            <h4 id="welcome"></h4>
        </div>
        <form action="/submittest" method="POST">
            <div class="mb-8 px-7">
                <label class="form-label">Question 1: <span id="que1"></span></label>
            </div>
            <div class="mb-8">
                <label for="subjectiveans1" class="form-label">Answer</label>
                <textarea class="form-control form-control-lg" name="subjectiveans1" type="text"></textarea>
            </div>
            <div class="mb-8">
                <label class="form-label">Question 2: <span id="que2"></span></label>
            </div>
            <div class="mb-8">
                <label for="subjectiveans2" class="form-label">Answer</label>
                <textarea class="form-control form-control-lg" name="subjectiveans2" type="text"></textarea>
            </div>

            <input type="hidden" id="testid" name="testid" value="">
            <input type="hidden" id="testtype" name="testtype" value="">
            <input type="hidden" id="teacherid" name="teacherid" value="">
            <input type="hidden" id="studentroll" name="studentroll" value="">
            <input type="hidden" id="studentname" name="studentname" value="">
            <input type="hidden" id="subject" name="subject" value="">
            <div class="col-lg-12 d-flex justify-content-center">
                <button type="submit" class=" objectivebutton mt-3 mb-8">Submit</button>
            </div>

        </form>
    </div>
</div>

{% endblock %}

{% block linkJs %}
<script>
    jsonstrstudent = '{{student}}';
    jsonstrtest = '{{test}}';
    student = JSON.parse(jsonstrstudent.replace(/&#34;/g, '"'));
    test = JSON.parse(jsonstrtest.replace(/&#34;/g, '"'));
    console.log(student[0])
    console.log(test[0])

    $(window).on("load", function () {
        displayWelcome();
        displaytest();
    });
    function displayWelcome() {
        $("#welcome").html(`Attempt Test, ${student[0].name}`)
    }

    function displaytest() {
        console.log("hello")
        $("#testid").val(test[0].id)
        $("#teacherid").val(test[0].teacherid)
        $("#subject").val(test[0].subject)
        $("#testtype").val(test[0].type)
        $("#studentroll").val(student[0].roll)
        $("#studentname").val(student[0].name)
        $("#que1").html(test[0].question1)
        $("#que2").html(test[0].question2)
    }

</script>
{% endblock %}